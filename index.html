<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Encoder/Decoder Tool</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Advanced encoder/decoder tool with multiple encoding methods, text analysis, and batch processing">
    <meta name="keywords" content="encoder, decoder, base64, hash, compression, text analysis">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>
                <i class="fas fa-code"></i>
                Advanced Encoder/Decoder
            </h1>
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <i class="fas fa-moon" id="theme-icon"></i>
                <span id="theme-text">Dark Mode</span>
            </button>
        </header>

        <div class="main-content">
            <div class="tool-section">
                <div class="tabs" role="tablist">
                    <button class="tab-button active" data-tab="decode" role="tab" aria-selected="true">
                        <i class="fas fa-unlock"></i> Decode
                    </button>
                    <button class="tab-button" data-tab="encode" role="tab" aria-selected="false">
                        <i class="fas fa-lock"></i> Encode
                    </button>
                    <button class="tab-button" data-tab="batch" role="tab" aria-selected="false">
                        <i class="fas fa-layer-group"></i> Batch
                    </button>
                    <button class="tab-button" data-tab="analysis" role="tab" aria-selected="false">
                        <i class="fas fa-chart-line"></i> Analysis
                    </button>
                </div>

                <!-- Decode Tab -->
                <div id="decode-tab" class="tab-content active" role="tabpanel">
                    <div class="drop-zone" ondrop="handleFileDrop(event)" ondragover="event.preventDefault()" ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)" onclick="document.getElementById('file-input').click()">
                        <i class="fas fa-file-upload fa-2x" style="margin-bottom: 10px;"></i>
                        <p>Drop a text file here or click to select</p>
                        <input type="file" id="file-input" accept=".txt,.json,.xml,.csv" style="display: none;" onchange="handleFileSelect(event)" aria-label="Select file to decode">
                    </div>

                    <div class="input-group">
                        <div class="input-label">
                            <label for="decode-input">Enter encoded text:</label>
                            <span class="char-count" id="decode-char-count">0 characters</span>
                        </div>
                        <textarea id="decode-input" class="textarea-large" placeholder="Enter your encoded text here..." oninput="handleDecodeInput()" aria-describedby="decode-char-count"></textarea>
                    </div>

                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="auto-decode" checked aria-describedby="auto-decode-help">
                            <span class="slider"></span>
                        </label>
                        <label for="auto-decode">Auto-detect and decode</label>
                        <i class="fas fa-info-circle tooltip" data-tooltip="Automatically detect encoding type and decode in real-time" id="auto-decode-help"></i>
                    </div>

                    <div class="button-group">
                        <button class="button" onclick="detectAndDecode()" id="decode-btn">
                            <i class="fas fa-search"></i>
                            Detect & Decode
                        </button>
                        <button class="button-secondary" onclick="toggleAdvancedSettings()" id="settings-toggle" style="display: block; visibility: visible;">
                            <i class="fas fa-cog"></i> Advanced Settings
                        </button>
                    </div>

                    <div id="advanced-settings" class="advanced-settings" style="display: none;">
                        <h4 style="margin: 16px 0 12px 0; color: var(--accent);">
                            <i class="fas fa-sliders-h"></i> Detection Settings
                        </h4>
                        
                        <div class="input-group">
                            <label for="detection-sensitivity">Detection Sensitivity:</label>
                            <select id="detection-sensitivity" onchange="updateSettings()">
                                <option value="strict">Strict (High accuracy)</option>
                                <option value="medium" selected>Medium (Balanced)</option>
                                <option value="loose">Loose (More attempts)</option>
                            </select>
                        </div>

                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" id="strict-validation" onchange="updateSettings()">
                                <span class="slider"></span>
                            </label>
                            <label for="strict-validation">Strict validation</label>
                            <i class="fas fa-info-circle tooltip" data-tooltip="Enable stricter input validation and error reporting"></i>
                        </div>

                        <div class="toggle-switch">
                            <label class="switch">
                                <input type="checkbox" id="show-confidence" onchange="updateSettings()">
                                <span class="slider"></span>
                            </label>
                            <label for="show-confidence">Show confidence scores</label>
                            <i class="fas fa-info-circle tooltip" data-tooltip="Display confidence percentage for detections"></i>
                        </div>

                        <div class="input-group">
                            <label>Enabled Encodings (leave empty for all):</label>
                            <div id="encoding-checkboxes" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="base64" onchange="updateSettings()"> Base64
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="base32" onchange="updateSettings()"> Base32
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="hex" onchange="updateSettings()"> Hexadecimal
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="url" onchange="updateSettings()"> URL Encoding
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="morse" onchange="updateSettings()"> Morse Code
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; font-size: 14px;">
                                    <input type="checkbox" value="binary" onchange="updateSettings()"> Binary
                                </label>
                            </div>
                        </div>

                        <div class="button-group" style="margin-top: 16px;">
                            <button class="button-secondary" onclick="resetSettings()">
                                <i class="fas fa-undo"></i> Reset
                            </button>
                            <button class="button-secondary" onclick="exportSettings()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>

                    <div id="decode-error" class="error hidden" role="alert"></div>
                    <div id="decode-success" class="success hidden" role="status"></div>
                    <div id="decode-warning" class="warning hidden" role="alert"></div>

                    <div id="decode-output" class="output-container">
                        <div class="output-header">
                            <div class="output-info">
                                <span id="encoding-type"></span>
                                <span id="decode-size-info"></span>
                            </div>
                            <button class="copy-button" onclick="copyText('decode-result')" aria-label="Copy decoded text">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="output-text" id="decode-result"></div>
                    </div>
                </div>

                <!-- Encode Tab -->
                <div id="encode-tab" class="tab-content" role="tabpanel">
                    <div class="input-group">
                        <div class="input-label">
                            <label for="encode-input">Enter text to encode:</label>
                            <span class="char-count" id="encode-char-count">0 characters</span>
                        </div>
                        <textarea id="encode-input" class="textarea-large" placeholder="Enter your text here..." oninput="handleEncodeInput()" aria-describedby="encode-char-count"></textarea>
                    </div>

                    <div class="input-group">
                        <label for="encoding-select">Select encoding type:</label>
                        <select id="encoding-select" aria-describedby="encoding-help">
                            <optgroup label="Base Encodings">
                                <option value="base64">Base64</option>
                                <option value="base32">Base32</option>
                                <option value="base85">Base85 (ASCII85)</option>
                            </optgroup>
                            <optgroup label="Text Encodings">
                                <option value="url">URL Encoding</option>
                                <option value="html">HTML Entities</option>
                                <option value="quoted-printable">Quoted-Printable</option>
                                <option value="uuencode">UUencode</option>
                            </optgroup>
                            <optgroup label="Numeric Encodings">
                                <option value="hex">Hexadecimal</option>
                                <option value="binary">Binary</option>
                                <option value="ascii">ASCII Codes</option>
                            </optgroup>
                            <optgroup label="Ciphers">
                                <option value="morse">Morse Code</option>
                                <option value="rot13">ROT13</option>
                                <option value="caesar">Caesar Cipher</option>
                            </optgroup>
                            <optgroup label="Hash Functions">
                                <option value="sha256">SHA-256</option>
                                <option value="sha1">SHA-1</option>
                                <option value="md5">MD5</option>
                            </optgroup>
                            <optgroup label="Compression">
                                <option value="compress">LZ Compression</option>
                            </optgroup>
                            <optgroup label="Tokens">
                                <option value="jwt">JWT (encode payload)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="input-group" id="caesar-shift-group" style="display: none;">
                        <label for="caesar-shift">Caesar Cipher Shift:</label>
                        <input type="number" id="caesar-shift" value="3" min="1" max="25" aria-describedby="caesar-help">
                        <small id="caesar-help" class="tooltip" data-tooltip="Number of positions to shift each letter">Shift value (1-25)</small>
                    </div>

                    <div class="toggle-switch">
                        <label class="switch">
                            <input type="checkbox" id="real-time-encode" aria-describedby="realtime-help">
                            <span class="slider"></span>
                        </label>
                        <label for="real-time-encode">Real-time encoding</label>
                        <i class="fas fa-info-circle tooltip" data-tooltip="Encode text as you type" id="realtime-help"></i>
                    </div>

                    <button class="button" onclick="encode()" id="encode-btn">
                        <i class="fas fa-lock"></i>
                        Encode
                    </button>

                    <div id="encode-error" class="error hidden" role="alert"></div>
                    <div id="encode-success" class="success hidden" role="status"></div>
                    <div id="encode-warning" class="warning hidden" role="alert"></div>

                    <div id="encode-output" class="output-container">
                        <div class="output-header">
                            <div class="output-info">
                                <span id="encode-type-info"></span>
                                <span id="encode-size-info"></span>
                            </div>
                            <button class="copy-button" onclick="copyText('encode-result')" aria-label="Copy encoded text">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div class="output-text" id="encode-result"></div>
                    </div>
                </div>

                <!-- Batch Tab -->
                <div id="batch-tab" class="tab-content" role="tabpanel">
                    <div class="input-group">
                        <label>Import Text File:</label>
                        <div class="button-group">
                            <button class="button-secondary" onclick="document.getElementById('batch-file-input').click()" aria-label="Import file for batch processing">
                                <i class="fas fa-file-import"></i> Import File
                            </button>
                            <button class="button-secondary" onclick="clearBatchInput()">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                        <input type="file" id="batch-file-input" accept=".txt,.csv,.json" style="display: none;" onchange="handleBatchFileImport(event)" aria-label="Select file for batch processing">
                    </div>
                    
                    <div class="input-group">
                        <label for="batch-input">Batch Processing:</label>
                        <textarea id="batch-input" class="textarea-large" placeholder="Enter multiple lines of text to process or import a file above..." aria-describedby="batch-help"></textarea>
                        <small id="batch-help">Each line will be processed separately</small>
                    </div>

                    <div class="input-group">
                        <label for="batch-operation">Operation:</label>
                        <select id="batch-operation" aria-describedby="batch-op-help">
                            <option value="encode">Encode</option>
                            <option value="decode">Auto-Decode</option>
                        </select>
                    </div>

                    <div class="input-group" id="batch-encoding-group">
                        <label for="batch-encoding">Encoding Type:</label>
                        <select id="batch-encoding">
                            <option value="base64">Base64</option>
                            <option value="base32">Base32</option>
                            <option value="base85">Base85</option>
                            <option value="url">URL Encoding</option>
                            <option value="html">HTML Entities</option>
                            <option value="hex">Hexadecimal</option>
                            <option value="binary">Binary</option>
                            <option value="morse">Morse Code</option>
                            <option value="rot13">ROT13</option>
                            <option value="ascii">ASCII Codes</option>
                            <option value="sha256">SHA-256</option>
                            <option value="compress">LZ Compression</option>
                        </select>
                    </div>

                    <button class="button" onclick="processBatch()">
                        <i class="fas fa-layer-group"></i>
                        Process Batch
                    </button>

                    <div class="button-group">
                        <button class="button-secondary" onclick="exportResults()">
                            <i class="fas fa-download"></i> Export Results
                        </button>
                        <button class="button-secondary" onclick="clearBatchResults()">
                            <i class="fas fa-trash"></i> Clear Results
                        </button>
                    </div>

                    <div id="batch-error" class="error hidden" role="alert"></div>
                    <div id="batch-success" class="success hidden" role="status"></div>
                    <div id="batch-warning" class="warning hidden" role="alert"></div>

                    <div id="batch-results" class="batch-results"></div>
                </div>

                <!-- Text Analysis Tab -->
                <div id="analysis-tab" class="tab-content" role="tabpanel">
                    <div class="input-group">
                        <label for="analysis-input">Text to Analyze:</label>
                        <textarea id="analysis-input" class="textarea-large" placeholder="Enter text to analyze..." oninput="performTextAnalysis()" style="min-height: 150px;" aria-describedby="analysis-help"></textarea>
                        <small id="analysis-help">Paste or type text to get detailed analysis including readability, word frequency, and statistics</small>
                    </div>

                    <div class="button-group">
                        <button class="button-secondary" onclick="document.getElementById('analysis-file-input').click()" aria-label="Import file for text analysis">
                            <i class="fas fa-file-import"></i> Import File
                        </button>
                        <button class="button-secondary" onclick="clearAnalysis()">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                    <input type="file" id="analysis-file-input" accept=".txt,.md,.json" style="display: none;" onchange="handleAnalysisFileImport(event)" aria-label="Select file for analysis">

                    <div id="analysis-error" class="error hidden" role="alert"></div>
                    <div id="analysis-success" class="success hidden" role="status"></div>
                    <div id="analysis-warning" class="warning hidden" role="alert"></div>

                    <div id="analysis-results" class="output-container" style="display: none;">
                        <div class="output-header">
                            <div class="output-info">
                                <i class="fas fa-chart-line"></i>
                                Advanced Text Analysis Results
                            </div>
                            <button class="copy-button" onclick="exportAnalysis()" aria-label="Export analysis results">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 20px;">
                            <!-- Basic Statistics -->
                            <div class="analysis-section">
                                <h4 style="margin-bottom: 12px; color: var(--accent);">
                                    <i class="fas fa-list-ol"></i> Basic Statistics
                                </h4>
                                <div class="stat-item">
                                    <span class="stat-label">Characters:</span>
                                    <span class="stat-value" id="char-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Characters (no spaces):</span>
                                    <span class="stat-value" id="char-no-spaces">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Words:</span>
                                    <span class="stat-value" id="word-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Sentences:</span>
                                    <span class="stat-value" id="sentence-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Paragraphs:</span>
                                    <span class="stat-value" id="paragraph-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Lines:</span>
                                    <span class="stat-value" id="line-count">0</span>
                                </div>
                            </div>

                            <!-- Reading Statistics -->
                            <div class="analysis-section">
                                <h4 style="margin-bottom: 12px; color: var(--accent);">
                                    <i class="fas fa-clock"></i> Reading Time
                                </h4>
                                <div class="stat-item">
                                    <span class="stat-label">Reading time (avg):</span>
                                    <span class="stat-value" id="reading-time">0 min</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Speaking time:</span>
                                    <span class="stat-value" id="speaking-time">0 min</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Avg words/sentence:</span>
                                    <span class="stat-value" id="avg-words-sentence">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Avg chars/word:</span>
                                    <span class="stat-value" id="avg-chars-word">0</span>
                                </div>
                            </div>

                            <!-- Character Analysis -->
                            <div class="analysis-section">
                                <h4 style="margin-bottom: 12px; color: var(--accent);">
                                    <i class="fas fa-font"></i> Character Analysis
                                </h4>
                                <div class="stat-item">
                                    <span class="stat-label">Uppercase:</span>
                                    <span class="stat-value" id="uppercase-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Lowercase:</span>
                                    <span class="stat-value" id="lowercase-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Numbers:</span>
                                    <span class="stat-value" id="number-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Special chars:</span>
                                    <span class="stat-value" id="special-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Spaces:</span>
                                    <span class="stat-value" id="space-count">0</span>
                                </div>
                            </div>

                            <!-- Most Common Words -->
                            <div class="analysis-section">
                                <h4 style="margin-bottom: 12px; color: var(--accent);">
                                    <i class="fas fa-sort-amount-down"></i> Most Common Words
                                </h4>
                                <div id="common-words" style="font-size: 14px;">
                                    <div style="color: var(--text-secondary); text-align: center; padding: 20px;">
                                        No text analyzed yet
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Keyboard Shortcuts -->
                <div class="keyboard-shortcuts">
                    <strong><i class="fas fa-keyboard"></i> Keyboard Shortcuts:</strong>
                    <div class="shortcut">
                        <span>Switch to Encode</span>
                        <span class="shortcut-key">Ctrl + E</span>
                    </div>
                    <div class="shortcut">
                        <span>Switch to Decode</span>
                        <span class="shortcut-key">Ctrl + D</span>
                    </div>
                    <div class="shortcut">
                        <span>Switch to Batch</span>
                        <span class="shortcut-key">Ctrl + B</span>
                    </div>
                    <div class="shortcut">
                        <span>Switch to Analysis</span>
                        <span class="shortcut-key">Ctrl + A</span>
                    </div>
                    <div class="shortcut">
                        <span>Clear Input</span>
                        <span class="shortcut-key">Ctrl + L</span>
                    </div>
                    <div class="shortcut">
                        <span>Execute Action</span>
                        <span class="shortcut-key">Ctrl + Enter</span>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- History Section -->
                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <i class="fas fa-history"></i>
                        Recent History
                    </div>
                    <div id="history-list">
                        <p style="color: var(--text-secondary); font-size: 14px; text-align: center; padding: 20px;">No recent activity</p>
                    </div>
                    <button class="button-secondary" onclick="clearHistory()" style="margin-top: 12px; width: 100%;">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                </div>

                <!-- Quick Tools -->
                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <i class="fas fa-tools"></i>
                        Quick Tools
                    </div>
                    <div style="display: grid; gap: 8px;">
                        <button class="button-secondary" onclick="generateRandomString()">
                            <i class="fas fa-random"></i> Random String
                        </button>
                        <button class="button-secondary" onclick="analyzeText()">
                            <i class="fas fa-chart-bar"></i> Text Analysis
                        </button>
                        <button class="button-secondary" onclick="formatJson()">
                            <i class="fas fa-code"></i> Format JSON
                        </button>
                    </div>
                </div>

                <!-- Statistics -->
                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <i class="fas fa-chart-line"></i>
                        Statistics
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-number" id="total-encodings">0</span>
                            <span class="stat-label">Encodings</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="total-decodings">0</span>
                            <span class="stat-label">Decodings</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="total-operations">0</span>
                            <span class="stat-label">Total Ops</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load JavaScript -->
    <script src="script.js"></script>
</body>
</html>
